import{bC as A,aX as S,h as $,fP as O,r as x,aa as z,j as e,L as c,P as H,fQ as o,S as q,ab as B,$ as F,b as G,gj as f,a6 as P,a7 as W,bx as _,by as U,gD as Q,gp as Y,B as V,Q as u,U as r,ag as j,gG as X,ah as y,gH as Z,Y as d}from"./strapi-BZZ6vgbi.js";const D=({sort:t="",pageSize:n=10,onChange:s})=>{const{formatMessage:i}=S();return e.jsx(V,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:e.jsxs(u.Root,{gap:4,children:[e.jsx(u.Item,{s:12,col:6,direction:"column",alignItems:"stretch",children:e.jsxs(r.Root,{hint:i({id:o("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),name:"pageSize",children:[e.jsx(r.Label,{children:i({id:o("config.entries.title"),defaultMessage:"Entries per page"})}),e.jsx(j,{onChange:a=>s({target:{name:"pageSize",value:a}}),value:n,children:X.map(a=>e.jsx(y,{value:a,children:a},a))}),e.jsx(r.Hint,{})]})}),e.jsx(u.Item,{s:12,col:6,direction:"column",alignItems:"stretch",children:e.jsxs(r.Root,{hint:i({id:o("config.note"),defaultMessage:"Note: You can override this value in the media library."}),name:"sort",children:[e.jsx(r.Label,{children:i({id:o("config.sort.title"),defaultMessage:"Default sort order"})}),e.jsx(j,{onChange:a=>s({target:{name:"sort",value:a}}),value:t,"test-sort":t,"data-testid":"sort-select",children:Z.map(a=>e.jsx(y,{"data-testid":`sort-option-${a.value}`,value:a.value,children:i({id:o(a.key),defaultMessage:`${a.value}`})},a.key))}),e.jsx(r.Hint,{})]})})]})})};D.propTypes={sort:d.string.isRequired,pageSize:d.number.isRequired,onChange:d.func.isRequired};const C=`${f}/ON_CHANGE`,v=`${f}/SET_LOADED`,J=({name:t,value:n})=>({type:C,keys:t,value:n}),K=()=>({type:v}),h={initialData:{},modifiedData:{}},M=t=>({...h,initialData:t,modifiedData:t}),ee=(t=h,n={type:""})=>z(t,s=>{switch(n.type){case C:{Y(s,["modifiedData",...n.keys.split(".")],n.value);break}case v:{const i=M(Q(s,["modifiedData"],{}));s.initialData=i.initialData,s.modifiedData=i.modifiedData;break}default:return s}}),ae=({config:t})=>{const{trackUsage:n}=A(),{formatMessage:s}=S(),{toggleNotification:i}=$(),{mutateConfig:a}=O(),{isLoading:R}=a,[k,p]=x.useState(!1),m=()=>p(l=>!l),[L,b]=x.useReducer(ee,h,()=>M(t)),{initialData:w,modifiedData:g}=L,E=l=>{l.preventDefault(),m()},T=async()=>{n("willEditMediaLibraryConfig"),await a.mutateAsync(g),p(!1),b(K()),i({type:"success",message:s({id:"notification.form.success.fields",defaultMessage:"Changes saved"})})},I=({target:{name:l,value:N}})=>{b(J({name:l,value:N}))};return e.jsx(c.Root,{children:e.jsx(H.Main,{"aria-busy":R,children:e.jsxs("form",{onSubmit:E,children:[e.jsx(c.Header,{navigationAction:e.jsx(G,{tag:P,startIcon:e.jsx(W,{}),to:`/plugins/${f}`,id:"go-back",children:s({id:o("config.back"),defaultMessage:"Back"})}),primaryAction:e.jsx(q,{size:"S",startIcon:e.jsx(F,{}),disabled:B(g,w),type:"submit",children:s({id:"global.save",defaultMessage:"Save"})}),subtitle:s({id:o("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:s({id:o("config.title"),defaultMessage:"Configure the view - Media Library"})}),e.jsx(c.Content,{children:e.jsx(D,{"data-testid":"settings",pageSize:g.pageSize||"",sort:g.sort||"",onChange:I})}),e.jsx(_.Root,{open:k,onOpenChange:m,children:e.jsx(U,{onConfirm:T,variant:"default",children:s({id:o("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"})})})]})})})};ae.propTypes={config:d.shape({pageSize:d.number,sort:d.string}).isRequired};export{ae as default};
