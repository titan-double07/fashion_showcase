const __vite__fileDeps=["strapi-BZZ6vgbi.js","strapi-COJtagOC.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{aW as I,aX as N,j as i,P as M,bm as _,L as D,cw as T,r as g,ch as A,cn as C,cx as O,aE as U,cy as B,bJ as R,bM as H,bC as $,av as G,cz as J,cA as K,cB as V,cC as W,a6 as z,d as P,cD as F,cE as Q}from"./strapi-BZZ6vgbi.js";import{s as X}from"./sortBy-CRb4ZhhJ.js";import{s as Y}from"./selectors-ZSFBgSp8-Da855wbZ.js";import"./_baseMap-CKJTBJNd.js";import"./_baseEach-BLzUieDk.js";const q=n=>n.map(a=>{const r=a.links.map(o=>({...o,isDisplayed:!1}));return{...a,links:r}}),Z=()=>{const[{isLoading:n,menu:a},r]=g.useState({isLoading:!0,menu:[]}),o=A("useSettingsMenu",s=>s.checkUserHasPermissions),h=C("useSettingsMenu",s=>s.shouldUpdateStrapi),m=O("useSettingsMenu",s=>s.settings),c=U(Y),b=g.useMemo(()=>B(),[]),{admin:e,global:t}=R(b,async()=>(await H(()=>import("./strapi-BZZ6vgbi.js").then(s=>s.jQ),__vite__mapDeps([0,1])).then(s=>s.J)).SETTINGS_LINKS_EE(),{combine(s,l){return{admin:[...l.admin,...s.admin],global:[...s.global,...l.global]}},defaultValue:{admin:[],global:[]}}),f=g.useCallback(s=>{if(!s.id)throw new Error("The settings menu item must have an id attribute.");return{...s,permissions:c.settings?.[s.id]?.main??[]}},[c.settings]);return g.useEffect(()=>{const s=async()=>{const w=await(S=>Promise.all(S.reduce((d,L,x)=>{const k=L.links.map(async(v,p)=>({hasPermission:(await o(v.permissions)).length>0,sectionIndex:x,linkIndex:p}));return[...d,...k]},[])))(j);r(S=>({...S,isLoading:!1,menu:j.map((d,L)=>({...d,links:d.links.map((x,k)=>{const v=w.find(p=>p.sectionIndex===L&&p.linkIndex===k);return{...x,isDisplayed:!!v?.hasPermission}})}))}))},{global:l,...y}=m,j=q([{...l,links:X([...l.links,...t.map(f)],u=>u.id).map(u=>({...u,hasNotification:u.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:e.map(f)},...Object.values(y)]);s()},[e,t,m,h,f,o]),{isLoading:n,menu:a.map(s=>({...s,links:s.links.filter(l=>l.isDisplayed)}))}},E=P(F)`
  right: 15px;
  position: absolute;
  bottom: 50%;
  transform: translateY(50%);

  path {
    fill: ${({theme:n})=>n.colors.warning500};
  }
`,ss=P(Q)`
  &.active ${E} {
    right: 13px;
  }
`,ts=({menu:n})=>{const{formatMessage:a}=N(),{trackUsage:r}=$(),{pathname:o}=G(),m=n.filter(e=>!e.links.every(t=>t.isDisplayed===!1)).map(e=>({...e,title:e.intlLabel,links:e.links.map(t=>({...t,title:t.intlLabel,name:t.id}))})),c=a({id:"global.settings",defaultMessage:"Settings"}),b=e=>()=>{r("willNavigate",{from:o,to:e})};return i.jsxs(J,{"aria-label":c,children:[i.jsx(K,{label:c}),i.jsx(V,{children:m.map(e=>i.jsx(W,{label:a(e.intlLabel),children:e.links.map(t=>i.jsxs(ss,{tag:z,withBullet:t.hasNotification,to:t.to,onClick:b(t.to),position:"relative",children:[a(t.intlLabel),t?.licenseOnly&&i.jsx(E,{width:"1.5rem",height:"1.5rem"})]},t.id))},e.id))})]})},rs=()=>{const n=I("/settings/:settingId/*"),{formatMessage:a}=N(),{isLoading:r,menu:o}=Z();return r?i.jsx(M.Loading,{}):n?.params.settingId?i.jsxs(D.Root,{sideNav:i.jsx(ts,{menu:o}),children:[i.jsx(M.Title,{children:a({id:"global.settings",defaultMessage:"Settings"})}),i.jsx(T,{})]}):i.jsx(_,{to:"application-infos"})};export{rs as Layout};
